<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout.html :: head('신청완료')">
    <meta charset="UTF-8">
    <title th:text="${title}">신청완료</title>
</head>
<body>
<nav class="py-2 bg-light border-bottom"
     th:replace="/fragments/layout.html :: menu">
</nav>
<header class="py-3 mb-4 border-bottom"
        th:replace="/fragments/layout.html :: header">
</header>

<div class="container">
    <h3 class="fw-bold text-center">배출신청이 완료되었습니다.</h3>
    <div class="row">
        주문번호 : <span th:text="${order.orderId}"
                     th:value="${order.orderId}"></span>
    </div>
    <div class="row">
        주문자 : <span th:text="${order.orderUserName}"
                    th:value="${order.orderUserName}"></span>
    </div>
    <div class="row">
        연락처 : <span th:text="${order.orderUserPhone}"
                    th:value="${order.orderUserPhone}"></span>
    </div>
</div>

<div class="container">
    <div class="result-info row">
        <h4>주문 결과</h4>
        <div th:each="result : ${resultList}" class="row">
            <span th:text="${result.wasteName}"></span>
            <span th:text="${result.count}"></span>
            <span th:text="${result.price}" class="price"></span>
            <span th:text="${result.wasteDetail}"></span>
        </div>
        <div class="row">
            총 주문 금액 : <span class="price-sum"></span>
        </div>
    </div>

</div>

<script>
    (function () {
        let resultInfo = document.querySelector(".result-info");
        let sum = Array.from(resultInfo.querySelectorAll(".price")).map(x => Number(x.innerText)).reduce((x, y) => x + y);
        document.querySelector(".price-sum").innerText = sum;
    })();
</script>

<footer class="container" th:fragment="foot">
    <p class="float-end"><a href="#">Back to top</a></p>
    <p>&copy; 2017–2023 Company, Inc. &middot; <a href="#">Privacy</a> &middot;
        <a href="#">Terms</a></p>
</footer>
</body>
</html>